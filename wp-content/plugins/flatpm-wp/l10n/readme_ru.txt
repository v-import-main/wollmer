# Flat PM #
* Contributors: FlatBoy
* Donate link: https://mehanoid.pro/flat-pm/
* Tags: ads, ad injection, ads plugin, ad rotation, ad manager, adsense, advertising, custom code, banner, rotator, ad blocking detection, header code, footer code, banners, adverts, sticky fixed widgets, flatpm, flat pm, flat profit maker
* Requires at least: 4.4
* Tested up to: 5.9.3
* Stable tag: 2.664
* Requires PHP: 5.6
* License: GPLv3
* License URI: https://www.gnu.org/licenses/gpl.html

## Description ##
Плагин вывода рекламы с огромным количеством функционала.
**Flat PM** – это плагин для вывода рекламы и интерактивного контента. Увеличивает конверсию, поведенческие факторы и выхлоп с сайтов!
> Основная цель плагина – упростить контроль по выводу рекламных блоков.

### Возможности таргетинга ###
* Использует ли пользователь ADblock
* Вывод рекламных блоков в нужном месте
* Таргет рекламы по контенту
* Таргетинг по странам и городам
* Возможность a/b тестирования
* Таргетинг по разрешению экрана
* Таргетинг по get-параметру в url, referer’у, cookie, ip, операционной системе, браузеру, времени и дате
* Вывод любого количества рекламных блоков

### Возможности вывода ###
* По js/css селекторам
* Единоразовый вывод или вывод с повторением
* Заготовленных мест для вывода больше 56
* Всплывающие окна
* Выезжающие окна снизу, сверху, справа, слева экрана
* Таймеры закрытия попапов и выезжающий блоков

### Дополнительные возможности ###
* Предусмотрен простой вывод кода в header и footer вашей темы
* Отложенный вывод рекламы
* Настройка оформления крестика закрытия выезжающих и всплывающих блоков
* В плагин интегрировано множество шорткодов для вывода информации о статье, категории или самом пользователе
* Есть функционал прилипающих блоков в контенте
* Есть функционал прилипающих блоков для сайдбара
* Вывод видео прероллов
* Отложенная загрузка рекламных блоков
* Отложенная загрузка метрики и аналитики
* Автоматическая очистка кеша на сайте
* Крутая подсветка синтаксиса кода

### Экспорт / импорт всех настроек ###
* Вы можете экспортировать настройки плагина на другой сайт
* Если вы хотите внести массовые изменения в блоки перед импортом, можете воспользоваться [микросервисом по дешифровке настроек](https://mehanoid.pro/deshifrator-shifrator-nastroek-plaginov/)

## Installation ##
Установите как и любой другой плагин или:
* Загрузите файлы в `/wp-content/plugins/flatpm-wp` директорию, или установите плагин через экран установки плагинов WordPress в административной панели.
* Активируйте плагин через список всех плагинов вашего сайта.


## Screenshots ##
1. Список всех рекламных юлоков
2. Добавление нового рекламного блока
3. Настройки вывода
4. Возможности PRO версии
5. Вставка кода в header и footer
6. Видео прероллы
7. Опции плагина
8. Экспорт и импорт


## Frequently Asked Questions ##

### Как создать А/Б тестирование? ###
Создайте два или более подблоков в пределах одного рекламного блока. Выберите у подблоков группу для ротации.
Группа должна быть одинаковая для подблоков, которым вы хотите создать ротацию в А/Б тесте.

### Как пользоваться селекторам? ###
О селекторах написал небольшую [статью](https://mehanoid.pro/css-selektory-kotorye-vy-dolzhny-znat/), в ней есть руководство и примеры.

### Как вывести блок в сайдбаре? ###
Зайдите в виджеты, создайте виджет с HTML,
Внутри виджета пропишите: `<div class="flat_side_1"></div>`
В настройках блока укажите "Поиск по всему документу" и селектор: `.flat_side_1`

### Как сделать прилипающий блок в контенте? ###
Нужно обернуть ваш код в эту конструкцию:

	`<div class="flatPM_sticky" data-height="500" data-top="74">
	Ваш рекламный код
</div>
data-height – это высота блока для прокрутки в пикселях, по умолчанию значение 350.
data-top – это отступ от верхнего края экрана в пикселях, по умолчанию значение 0`

### Как сделать прилипающий блок для сайдбара? ###
Нужно обернуть ваш код в эту конструкцию:

	`<div class="flatPM_sidebar" data-top="76">
	ваш код №1
</div>
<div class="flatPM_sidebar" data-top="76">
	ваш код №2
</div>
<div class="flatPM_sidebar" data-top="76">
	ваш код №3
</div>
data-top – это отступ от верхнего края экрана в пикселях, по умолчанию значение 0`

Количество блоков может быть любым, от 1 до бесконечности.
Если блок всего один, то он будет фиксированным и заменять функционал плагина Q2W3 Fixed Widget.
Если же блоков больше одного, то они будут сменять друг друга на равных промежутках при скролле страницы вниз.


## Changelog ##

### 2.661 ###
* Исправлен потенциальный баг с выводом адсенса.
* Исправлен потенциальный баг с проверкой GEO юзера.

### 2.658 ###
* Исправлен баг проверки ssl подписи при проверки лицензии.

### 2.657 ###
* Исправлены 2 уязвимости в плагине. Ничего критичного, но всё же.
* Исправлен баг, он был связан с неправильным подсчётом "минимального интервала" в символах.
* Исправлен баг вывода "через N символов", он был связан с скрытыми тегами, картинками, рекламой "img, ins, script, style, noscript".
* Исправлен баг вывода рекламного кода для видео прероллов, баг был связан с обработкой двойных кавычек.
* В новой версии изменён адрес проверки лицензии с wp-pro.online на mehanoid.pro. Старый адрес всё ещё поддерживается, но не позднее чем через 3 месяца будет полностью удалён и станет недоступным. Рекомендуем обновить плагин.
* Ещё множество мелкоправок кода, которые призваны подготовить почву для крупного обновления.
* Визуальные правки в админке.
* [Весь список изменений до 2.654](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.655 ###
* Исправлена уязвимость в плагине.
* [Весь список изменений до 2.654](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.654 ###
* Исправлена уязвимость в плагине.
* Исправлен конфликт с плагином WPRocket, с его функцией отложенных скриптов.
* [Весь список изменений до 2.654](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.653 ###
* Исправлен баг с сохранением/выводом селекторов.
* [Весь список изменений до 2.653](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.651 ###
* Добавлен вывод блоков на страницах с 404 ошибкой - is_404().
* [Весь список изменений до 2.651](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.650 ###
* Порядковый номер блока теперь сохраняется более интуитивно, так же добавлено оповещение для большей наглядности.
* Полный релиз плагина в репозитории вордпресса.
* [Весь список изменений до 2.650](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.644 ###
* Исправлен баг с функционалом определения cookie и get-параметров.
Плагин некорректно определял значения, если таких было больше одного
* Добавлены настройки для вывода кода внутри элементов.
Для “Один раз” и “Каждые N”, а именно – “Добавить в начало”, “Добавить в конец”.
Итого реализованы все 4 основные типа вставки контента: before, after, append, prepend.
* В настройках плагина добавлена опция, позволяющая давать доступ управления плагином для редакторов.
* В плагин был внедрён алгоритм очистки всех данных, которые записываются в базу данных.
* [Весь список изменений до 2.644](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)

### 2.623 ###
* первая версия в репозитории
* [Весь список изменений до 2.623](https://mehanoid.pro/flat-pm/shangelog-flat-pm/)


## Upgrade Notice ##
Bugfix release.