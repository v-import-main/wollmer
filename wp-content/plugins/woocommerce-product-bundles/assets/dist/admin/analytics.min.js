!function(r){var a={};function o(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=26)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t,r){e.exports=r(23)()},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wc.components},function(e,t){e.exports=window.wc.data},function(e,t){e.exports=window.wc.navigation},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=window.wc.number},function(e,t){e.exports=window.wc.date},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wp.htmlEntities},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wc.csvExport},function(e,t){e.exports=window.wc.currency},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.url},function(e,t){function r(){return e.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.dom},,function(e,t,r){"use strict";var s=r(24);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,n){if(n!==s)throw(n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",n}function t(){return e}var r={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,function(R,e,t){"use strict";t.r(e);var L=t(10),I=t(1),V=t(0),A=t(4),d=t(7),e=t(12),r=t(11),a=t(2),a=t.n(a),Q=t(6),b=t(8),M=t(5),_=t(9),o=t(16),o=t.n(o);const n=o()(d.CURRENCY);o=Object(V.createContext)(n);class s extends V.Component{formatVal(e,t){var{formatAmount:r,getCurrencyConfig:a}=this.context;return"currency"===t?r(e):Object(b.formatValue)(a(),t,e)}getValues(e,t){var{emptySearchResults:r,summaryData:a}=this.props,a=a["totals"],o=a.primary?a.primary[e]:0,a=a.secondary?a.secondary[e]:0,e=r?0:o,o=r?0:a;return{delta:Object(b.calculateDelta)(e,o),prevValue:this.formatVal(o,t),value:this.formatVal(e,t)}}render(){const{charts:t,query:e,selectedChart:i,summaryData:r,defaultDateRange:a}=this.props;var{isError:o,isRequesting:n}=r;if(!o){if(n)return Object(V.createElement)(A.SummaryListPlaceholder,{numberOfItems:t.length});const l=Object(_.getDateParamsFromQuery)(e,a)["compare"];return Object(V.createElement)(A.SummaryList,null,e=>{let c=e["onToggle"];return t.map(e=>{var{key:e,order:t,orderby:r,label:a,type:o}=e,n={chart:e},r=(r&&(n.orderby=r),t&&(n.order=t),Object(Q.getNewPath)(n)),t=i.key===e,{delta:n,prevValue:o,value:s}=this.getValues(e,o);return Object(V.createElement)(A.SummaryNumber,{key:e,delta:n,href:r,label:a,prevLabel:"previous_period"===l?Object(I.__)("Previous Period:","woocommerce-product-bundles"):Object(I.__)("Previous Year:","woocommerce-product-bundles"),prevValue:o,selected:t,value:s,onLinkClickCallback:()=>{c&&c()}})})})}}}s.propTypes={charts:a.a.array.isRequired,endpoint:a.a.string.isRequired,query:a.a.object.isRequired,selectedChart:a.a.shape({key:a.a.string.isRequired,label:a.a.string.isRequired,order:a.a.oneOf(["asc","desc"]),orderby:a.a.string,type:a.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:a.a.object,report:a.a.string},s.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},s.contextType=o;var c=Object(e.compose)(Object(r.withSelect)((e,t)=>{const{charts:r,endpoint:a,limitProperties:o,query:n,filters:s,advancedFilters:c}=t;var i,t=o||[a],l=t.some(e=>n[e]&&n[e].length);return n.search&&!l?{emptySearchResults:!0}:(l=r&&r.map(e=>e.key),i=e(M.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],{summaryData:Object(M.getSummaryNumbers)({endpoint:a,query:n,select:e,limitBy:t,filters:s,advancedFilters:c,defaultDateRange:i,fields:l}),defaultDateRange:i})}))(s),l=t(17),H=t(3);class i extends V.Component{render(){var{className:e,isError:t,isEmpty:r}=this.props;let a,o,n,s;return t?(a=Object(I.__)("There was an error getting your stats. Please try again.","woocommerce-product-bundles"),o=Object(I.__)("Reload","woocommerce-product-bundles"),s=()=>{window.location.reload()}):r&&(a=Object(I.__)("No results could be found for this date range.","woocommerce-product-bundles"),o=Object(I.__)("View Orders","woocommerce-product-bundles"),n=Object(d.getAdminLink)("edit.php?post_type=shop_order")),Object(V.createElement)(A.EmptyContent,{className:e,title:a,actionLabel:o,actionURL:n,actionCallback:s})}}i.propTypes={className:a.a.string,isError:a.a.bool,isEmpty:a.a.bool},i.defaultProps={className:""};var Y=i;class u extends V.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(H.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:a}=this.props;return e.data.intervals.map(function(e){const r={};return e.subtotals.segments.forEach(function(e){var t;e.segment_label&&(t=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label,r[e.segment_id]={label:t,value:e.subtotals[a.key]||0})}),{date:Object(l.format)("Y-m-d\\TH:i:s",e.date_start),...r}})}getTimeChartData(){const{query:a,primaryData:e,secondaryData:o,selectedChart:n,defaultDateRange:t}=this.props,s=Object(_.getIntervalForQuery)(a),{primary:c,secondary:i}=Object(_.getCurrentDates)(a,t);return e.data.intervals.map(function(e,t){var r=Object(_.getPreviousDate)(e.date_start,c.after,i.after,a.compare,s),t=o.data.intervals[t];return{date:Object(l.format)("Y-m-d\\TH:i:s",e.date_start),primary:{label:`${c.label} (${c.range})`,labelDate:e.date_start,value:e.subtotals[n.key]||0},secondary:{label:`${i.label} (${i.range})`,labelDate:r.format("YYYY-MM-DD HH:mm:ss"),value:t&&t.subtotals[n.key]||0}}})}getTimeChartTotals(){var{primaryData:e,secondaryData:t,selectedChart:r}=this.props;return{primary:Object(H.get)(e,["data","totals",r.key],null),secondary:Object(H.get)(t,["data","totals",r.key],null)}}renderChart(e,t,r,a){var{emptySearchResults:o,filterParam:n,interactiveLegend:s,itemsLabel:c,legendPosition:i,path:l,query:d,selectedChart:u,showHeaderControls:m,primaryData:p}=this.props,b=Object(_.getIntervalForQuery)(d),y=Object(_.getAllowedIntervalsForQuery)(d),p=Object(_.getDateFormatsForInterval)(b,p.data.intervals.length),o=o?Object(I.__)("No data for the current search","woocommerce-admin"):Object(I.__)("No data for the selected date range","woocommerce-admin"),{formatAmount:g,getCurrencyConfig:h}=this.context;return Object(V.createElement)(A.Chart,{allowedIntervals:y,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:o,filterParam:n,interactiveLegend:s,interval:b,isRequesting:t,itemsLabel:c,legendPosition:i,legendTotals:a,mode:e,path:l,query:d,screenReaderFormat:p.screenReaderFormat,showHeaderControls:m,title:u.label,tooltipLabelFormat:p.tooltipLabelFormat,tooltipTitle:"time-comparison"===e&&u.label||null,tooltipValueFormat:Object(M.getTooltipValueFormat)(u.type,g),chartType:Object(_.getChartTypeForQuery)(d),valueType:u.type,xFormat:p.xFormat,x2Format:p.x2Format,currency:h()})}renderItemComparison(){var{isRequesting:e,primaryData:t}=this.props;return t.isError?Object(V.createElement)(Y,{isError:!0}):(e=e||t.isRequesting,t=this.getItemChartData(),this.renderChart("item-comparison",e,t))}renderTimeComparison(){var{isRequesting:e,primaryData:t,secondaryData:r}=this.props;return!t||t.isError||r.isError?Object(V.createElement)(Y,{isError:!0}):(e=e||t.isRequesting||r.isRequesting,t=this.getTimeChartData(),r=this.getTimeChartTotals(),this.renderChart("time-comparison",e,t,r))}render(){var e=this.props["mode"];return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}u.contextType=o,u.propTypes={filters:a.a.array,isRequesting:a.a.bool,itemsLabel:a.a.string,limitProperties:a.a.array,mode:a.a.string,path:a.a.string.isRequired,primaryData:a.a.object,query:a.a.object.isRequired,secondaryData:a.a.object,selectedChart:a.a.shape({key:a.a.string.isRequired,label:a.a.string.isRequired,order:a.a.oneOf(["asc","desc"]),orderby:a.a.string,type:a.a.oneOf(["average","number","currency"]).isRequired}).isRequired},u.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};var m=Object(e.compose)(Object(r.withSelect)((e,t)=>{const{charts:r,endpoint:a,filters:o,isRequesting:n,limitProperties:s,query:c,advancedFilters:i}=t;var l,d,u=s||[a],m=function e(t,r,a){var o,n,a=2<arguments.length&&void 0!==a?a:{};return t&&0!==t.length?(n=(t=t.slice(0)).pop()).showFilters(r,a)?(o=Object(Q.flattenFilters)(n.filters),n=r[n.param]||n.defaultValue||"all",Object(H.find)(o,{value:n})):e(t,r,a):null}(o,c),p=Object(H.get)(m,["settings","param"]),t=t.mode||function(e,t){if(e&&t){var r=Object(H.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(H.get)(e,["chartMode"])}return null}(m,c)||"time-comparison",m=e(M.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"],b=e(M.REPORTS_STORE_NAME),p={mode:t,filterParam:p,defaultDateRange:m};return n?p:(l=u.some(e=>c[e]&&c[e].length),c.search&&!l?{...p,emptySearchResults:!0}:(l=r&&r.map(e=>e.key),d=Object(M.getReportChartData)({endpoint:a,dataType:"primary",query:c,select:e,selector:b,limitBy:u,filters:o,advancedFilters:i,defaultDateRange:m,fields:l}),"item-comparison"===t?{...p,primaryData:d}:(t=Object(M.getReportChartData)({endpoint:a,dataType:"secondary",query:c,select:e,selector:b,limitBy:u,filters:o,advancedFilters:i,defaultDateRange:m,fields:l}),{...p,primaryData:d,secondaryData:t})))}))(u),p=t(18),q=t.n(p),E=t(19);function y(e,t){t=1<arguments.length&&void 0!==t?t:[],e=Object(H.find)(t,{key:e});return e||t[0]}var g=t(13),p=t(20),W=t.n(p),U=t(14),$=t(21),K=t(15),z=()=>Object(V.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24"},Object(V.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519 C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14 C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}));p=s=>{const{getHeadersContent:a,getRowsContent:o,getSummary:n,isRequesting:e,primaryData:t,tableData:r,endpoint:c,itemIdField:i,tableQuery:B,compareBy:l,compareParam:d,searchBy:u,labels:m={},...p}=s,{query:b,columnPrefsKey:y}=s,{items:g,query:h}=r;var _=b[d]?Object(Q.getIdsFromQuery)(b[l]):[];const[f,O]=Object(V.useState)(_),j=Object(V.useRef)(null),{updateUserPreferences:w,...v}=Object(M.useUserPreferences)();if(r.isError||t.isError)return Object(V.createElement)(Y,{isError:!0});let C=[];y&&(C=v&&v[y]?v[y]:C);const S=(e,t,r)=>{r=n?n(t,r):null;return Object(L.applyFilters)("woocommerce_admin_report_table",{endpoint:c,headers:a(),rows:o(e),totals:t,summary:r,items:g})};const R=e=>{var t=s["ids"];O(e?t:[])},q=(e,t)=>{var r=s["ids"];t?O(Object(H.uniq)([r[e],...f])):(t=f.indexOf(r[e]),O([...f.slice(0,t),...f.slice(t+1)]))};var _=e||r.isRequesting||t.isRequesting,E=Object(H.get)(t,["data","totals"],{}),k=g.totalResults||0,x=0<k,D=Object(Q.getSearchWords)(b).map(e=>({key:e,label:e})),T=g["data"],T=S(T,E,k);let{headers:P,rows:F}=T;var N,E=T["summary"],T=(l&&(F=F.map((e,t)=>[(e=>{var{ids:t=[]}=s,t=-1!==f.indexOf(t[e]);return{display:Object(V.createElement)(U.CheckboxControl,{onChange:Object(H.partial)(q,e),checked:t}),value:!1}})(t),...e]),P=[(()=>{var{ids:e=[]}=s,t=0<e.length,e=t&&e.length===f.length;return{cellClassName:"is-checkbox-column",key:"compare",label:Object(V.createElement)(U.CheckboxControl,{onChange:R,"aria-label":Object(I.__)("Select All"),checked:e,disabled:!t}),required:!0}})(),...P]),T=P,(N=C)?T.map(e=>({...e,visible:e.required||!N.includes(e.key)})):T.map(e=>({...e,visible:e.required||!e.hiddenByDefault})));return Object(V.createElement)(V.Fragment,null,Object(V.createElement)("div",{className:"woocommerce-report-table__scroll-point",ref:j,"aria-hidden":!0}),Object(V.createElement)(A.TableCard,W()({className:"woocommerce-report-table-"+c.replace("/","-"),hasSearch:!!u,actions:[l&&Object(V.createElement)(A.CompareButton,{key:"compare",className:"woocommerce-table__compare",count:f.length,helpText:m.helpText||Object(I.__)("Check at least two items below to compare","woocommerce-admin"),onClick:()=>{l&&Object(Q.onQueryChange)("compare")(l,d,f.join(","))},disabled:!x},m.compareButton||Object(I.__)("Compare","woocommerce-admin")),u&&Object(V.createElement)(A.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:e=>{var t=s["baseSearchQuery"],e=e.map(e=>e.label.replace(",","%2C"));e.length?Object(Q.updateQueryString)({filter:void 0,[d]:void 0,[u]:void 0,...t,search:Object(H.uniq)(e).join(",")}):Object(Q.updateQueryString)({search:void 0})},placeholder:m.placeholder||Object(I.__)("Search by item name","woocommerce-admin"),selected:D,showClearButton:!0,type:u,disabled:!x}),x&&Object(V.createElement)(U.Button,{key:"download",className:"woocommerce-table__download-button",disabled:_,onClick:()=>{const{createNotice:t,startExport:e,title:r}=s;var a=Object.assign({},b),{data:o,totalResults:n}=g;delete a.extended_info,a.search&&delete a[u],o&&o.length===n?({headers:o,rows:n}=S(o,n),Object(K.downloadCSVFile)(Object(K.generateCSVFileName)(r,a),Object(K.generateCSVDataFromTable)(o,n))):e(c,h).then(()=>t("success",Object(I.sprintf)(Object(I.__)("Your %s Report will be emailed to you.","woocommerce-admin"),r))).catch(e=>t("error",e.message||Object(I.sprintf)(Object(I.__)("There was a problem exporting your %s Report. Please try again.","woocommerce-admin"),r)))}},Object(V.createElement)(z,null),Object(V.createElement)("span",{className:"woocommerce-table__download-button__label"},m.downloadButton||Object(I.__)("Download","woocommerce-admin")))],headers:T,isLoading:_,onQueryChange:Q.onQueryChange,onColumnsChange:(t,e)=>{var r=P.map(e=>e.key).filter(e=>!t.includes(e));y&&(r={[y]:r},w(r))},onSort:(e,t)=>{Object(Q.onQueryChange)("sort")(e,t);c},onPageChange:(e,t)=>{j.current.scrollIntoView();var r=j.current.nextSibling.querySelector(".woocommerce-table__table"),r=$.focus.focusable.find(r);r.length&&r[0].focus()},rows:F,rowsPerPage:parseInt(h.per_page,10)||M.QUERY_DEFAULTS.pageSize,summary:E,totalRows:k},p)))};p.propTypes={baseSearchQuery:a.a.object,compareBy:a.a.string,compareParam:a.a.string,columnPrefsKey:a.a.string,endpoint:a.a.string,getHeadersContent:a.a.func.isRequired,getRowsContent:a.a.func.isRequired,getSummary:a.a.func,itemIdField:a.a.string,labels:a.a.shape({compareButton:a.a.string,downloadButton:a.a.string,helpText:a.a.string,placeholder:a.a.string}),primaryData:a.a.object,searchBy:a.a.string,summaryFields:a.a.arrayOf(a.a.string),tableData:a.a.object.isRequired,tableQuery:a.a.object,title:a.a.string.isRequired},p.defaultProps={primaryData:{},tableData:{items:{data:[],totalResults:0},query:{}},tableQuery:{},compareParam:"filter",downloadable:!1,onSearch:H.noop,baseSearchQuery:{}};const h={};var f=Object(e.compose)(Object(r.withSelect)((e,t)=>{var{endpoint:t,getSummary:r,isRequesting:a,query:o,tableData:n,tableQuery:s,filters:c,advancedFilters:i,summaryFields:l,extendedItemsStoreName:d}=t,u=e(M.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings")["woocommerce_default_date_range"];return a?h:(a=e(M.REPORTS_STORE_NAME),d&&e(d),{primaryData:r?Object(M.getReportChartData)({endpoint:t,dataType:"primary",query:o,select:e,selector:a,filters:c,advancedFilters:i,defaultDateRange:u,fields:l}):h,tableData:n||Object(M.getReportTableData)({endpoint:t,query:o,select:e,selector:a,tableQuery:s,filters:c,advancedFilters:i,defaultDateRange:u}),query:o})}),Object(r.withDispatch)(e=>{var t=e(M.EXPORT_STORE_NAME)["startExport"],e=e("core/notices")["createNotice"];return{createNotice:e,startExport:t}}))(p),t=Object(d.getSetting)("admin",{});const k="object"==typeof t&&1!==t.length&&t.stockStatuses?t.stockStatuses:Object(d.getSetting)("stockStatuses",{});class O extends V.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:Object(I.__)("Bundle Title","woocommerce-product-bundles"),key:"product_name",required:!0,isLeftAligned:!0,isSortable:!0},{label:Object(I.__)("SKU","woocommerce-product-bundles"),key:"sku",hiddenByDefault:!0,isSortable:!0},{label:Object(I.__)("Bundles Sold","woocommerce-product-bundles"),key:"items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(I.__)("Bundled Items Sold","woocommerce-product-bundles"),key:"bundled_items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(I.__)("Net Sales","woocommerce-product-bundles"),screenReaderLabel:Object(I.__)("Net Sales","woocommerce-product-bundles"),key:"net_revenue",required:!0,isSortable:!0,isNumeric:!0},{label:Object(I.__)("Orders","woocommerce-product-bundles"),key:"orders_count",isSortable:!0,isNumeric:!0},{label:Object(I.__)("Status","woocommerce-product-bundles"),key:"stock_status"}].filter(Boolean)}getRowsContent(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.props["query"];const d=Object(Q.getPersistedQuery)(t),{render:u,formatDecimal:m,getCurrencyConfig:r}=this.context,p=r();return Object(H.map)(e,e=>{var{product_id:t,items_sold:r,bundled_items_sold:a,net_revenue:o,orders_count:n}=e,e=e.extended_info||{},{sku:s,stock_status:c}=e,e=Object(g.decodeEntities)(e.name),i=Object(Q.getNewPath)(d,"/analytics/orders",{filter:"advanced",product_includes:t}),t=Object(Q.getNewPath)(d,"/analytics/products",{filter:"single_product",products:t}),l="insufficientstock"===c?Object(I.__)("Insufficient Stock","woocommerce-product-bundles"):k[c];return[{display:Object(V.createElement)(A.Link,{href:t,type:"wc-admin"},e),value:e},{display:s,value:s},{display:Object(b.formatValue)(p,"number",r),value:r},{display:Object(b.formatValue)(p,"number",a),value:a},{display:u(o),value:m(o)},{display:Object(V.createElement)(A.Link,{href:i,type:"wc-admin"},n),value:n},{display:l,value:c}].filter(Boolean)})}getSummary(e){var{products_count:e=0,items_sold:t=0,bundled_items_sold:r=0,net_revenue:a=0,orders_count:o=0}=e,{formatAmount:n,getCurrencyConfig:s}=this.context,s=s();return[{label:Object(I._n)("bundle","bundles",e,"woocommerce-product-bundles"),value:Object(b.formatValue)(s,"number",e)},{label:Object(I._n)("sale","sales",t,"woocommerce-product-bundles"),value:Object(b.formatValue)(s,"number",t)},{label:Object(I._n)("bundled item sold","bundled items sold",r,"woocommerce-product-bundles"),value:Object(b.formatValue)(s,"number",r)},{label:Object(I.__)("net sales","woocommerce-product-bundles"),value:n(a)},{label:Object(I._n)("order","orders",o,"woocommerce-product-bundles"),value:Object(b.formatValue)(s,"number",o)}]}render(){var{filters:e,isRequesting:t,hideCompare:r,query:a}=this.props;return Object(V.createElement)(f,{endpoint:"bundles",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["products_count","items_sold","bundled_items_sold","net_revenue","orders_count"],itemIdField:"product_id",isRequesting:t,query:a,compareBy:r?void 0:"bundles",tableQuery:{orderby:a.orderby||"items_sold",order:a.order||"desc",extended_info:!0,segmentby:a.segmentby},title:Object(I.__)("Bundles","woocommerce-product-bundles"),columnPrefsKey:"bundles_report_columns",filters:e})}}O.contextType=o;var x=O,e=Object(d.getSetting)("admin",{});const j="object"==typeof e&&1!==e.length&&e.stockStatuses?e.stockStatuses:Object(d.getSetting)("stockStatuses",{});class w extends V.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this)}getHeadersContent(){return[{label:Object(I.__)("Bundle","woocommerce-product-bundles"),key:"bundle_name",required:!0,defaultSort:!0,isSortable:!0,isLeftAligned:!0},{label:Object(I.__)("Bundled Product","woocommerce-product-bundles"),key:"product_name",isSortable:!0},{label:Object(I.__)("Stock Status","woocommerce-product-bundles"),key:"stock_status"},{label:Object(I.__)("Remaining Stock","woocommerce-product-bundles"),key:"stock_quantity",isSortable:!1},{label:Object(I.__)("Required Stock","woocommerce-product-bundles"),key:"units_required",isSortable:!0,required:!0,isNumeric:!0}].filter(Boolean)}getRowsContent(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],{}=this.props,t=this.context["getCurrencyConfig"];const l=t();return Object(H.map)(e,e=>{var{bundle_id:t,product_id:r}=e,{name:e,manage_stock:a,stock_quantity:o,bundle_name:n,units_required:s,stock_status:c}=e.extended_info||{},n=Object(g.decodeEntities)(n),t=Object(d.getAdminLink)("post.php?post="+t+"&action=edit"),e=Object(g.decodeEntities)(e),r=Object(d.getAdminLink)("post.php?post="+r+"&action=edit"),i=j[c];return[{display:Object(V.createElement)(A.Link,{href:t,type:"wp-admin"},n),value:n},{display:Object(V.createElement)(A.Link,{href:r,type:"wp-admin"},e),value:e},{display:i,value:j[c]},{display:a?Object(b.formatValue)(this.context.getCurrencyConfig(),"number",o):Object(I.__)("N/A","woocommerce-product-bundles"),value:o},{display:Object(b.formatValue)(l,"number",s),value:s}].filter(Boolean)})}render(){var{filters:e,isRequesting:t,hideCompare:r,query:a}=this.props;return Object(V.createElement)(f,{endpoint:"bundles/stock",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,itemIdField:"product_id",isRequesting:t,query:a,compareBy:r?void 0:"bundles",tableQuery:{orderby:a.orderby||"product_name",order:a.order||"asc",extended_info:!0,segmentby:a.segmentby},title:Object(I.__)("Stock","woocommerce-product-bundles"),columnPrefsKey:"bundles_stock_report_columns",filters:e})}}w.contextType=o;var D=w,r=function(r,e){let a=1<arguments.length&&void 0!==e?e:identity;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=r,e=Object(Q.getIdsFromQuery)(e);return e.length<1?Promise.resolve([]):(e={include:e.join(","),per_page:e.length},q()({path:Object(E.addQueryArgs)(t,e)}).then(e=>e.map(a)))}}(M.NAMESPACE+"/products",e=>({key:e.id,label:e.name}));const v=Object(L.applyFilters)("woocommerce_admin_bundles_report_charts",[{key:"items_sold",label:Object(I.__)("Bundles Sold","woocommerce-product-bundles"),order:"desc",orderby:"items_sold",type:"number"},{key:"bundled_items_sold",label:Object(I.__)("Bundled Items Sold","woocommerce-product-bundles"),order:"desc",orderby:"bundled_items_sold",type:"number"},{key:"net_revenue",label:Object(I.__)("Net Sales","woocommerce-product-bundles"),order:"desc",orderby:"net_revenue",type:"currency"},{key:"orders_count",label:Object(I.__)("Orders","woocommerce-product-bundles"),order:"desc",orderby:"orders_count",type:"number"}]),C=[{label:Object(I.__)("View","woocommerce-product-bundles"),staticParams:["filter","products"],param:"section",showFilters:()=>!0,filters:[{label:Object(I.__)("Revenue","woocommerce-product-bundles"),value:"all"},{label:Object(I.__)("Stock","woocommerce-product-bundles"),value:"stock"}]},{label:Object(I.__)("Show","woocommerce-product-bundles"),staticParams:["section","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:Object(I.__)("All Bundles","woocommerce-product-bundles"),value:"all"},{label:Object(I.__)("Single Bundle","woocommerce-product-bundles"),value:"select_bundle",subFilters:[{component:"Search",value:"single_product",path:["select_bundle"],settings:{type:"products",param:"products",getLabels:r,labels:{placeholder:Object(I.__)("Type to search for a bundle","woocommerce-product-bundles"),button:Object(I.__)("Single Bundle","woocommerce-product-bundles")}}}]}]}];Object(d.getSetting)("manageStock","no");class S extends V.Component{getChartMeta(){var{}=this.props;return{itemsLabel:Object(I.__)("%d bundles","woocommerce-product-bundles"),mode:"time-comparison"}}render(){var e,{itemsLabel:t,mode:r}=this.getChartMeta(),{path:a,query:o,isError:n,isRequesting:s}=this.props;return n?Object(V.createElement)(ReportError,{isError:!0}):(n={...o},e="stock"!==o.section,r="stock"!==o.section?Object(V.createElement)(V.Fragment,null,Object(V.createElement)(c,{mode:r,charts:v,endpoint:"bundles",isRequesting:s,query:n,selectedChart:y(o.chart,v),filters:C}),Object(V.createElement)(m,{charts:v,mode:r,endpoint:"bundles",isRequesting:s,itemsLabel:t,path:a,query:n,selectedChart:y(n.chart,v),filters:C}),Object(V.createElement)(x,{isRequesting:s,hideCompare:!0,query:o,filters:C})):Object(V.createElement)(V.Fragment,null,Object(V.createElement)("p",null,Object(V.createInterpolateElement)(Object(I.__)("Use this report to identify Bundles with <strong>Insufficient Stock</strong>, and re-stock their contents.","woocommerce-product-bundles"),{strong:Object(V.createElement)("strong",null)})),Object(V.createElement)(D,{isRequesting:s,hideCompare:!0,query:o,filters:C})),Object(V.createElement)(V.Fragment,null,Object(V.createElement)(A.ReportFilters,{query:o,path:a,showDatePicker:!1,filters:C}),Object(V.createElement)(A.ReportFilters,{query:o,path:a,showDatePicker:e}),r))}}S.propTypes={path:a.a.string.isRequired,query:a.a.object.isRequired};var T=S;Object(L.addFilter)("woocommerce_admin_reports_list","woocommerce-product-bundles",e=>[...e,{report:"bundles",title:Object(I._x)("Bundles","analytics report table","woocommerce-product-bundles"),component:T,navArgs:{id:"wc-pb-bundles-analytics-report"}}])}]);